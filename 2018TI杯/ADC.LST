C51 COMPILER V9.52.0.0   ADC                                                               07/21/2018 19:14:19 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN ADC.OBJ
COMPILER INVOKED BY: C:\Keil_51\C51\BIN\C51.EXE ADC.c LARGE BROWSE INCDIR(.\应用) DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          //########################################################################################################
             -####################//
   2          //----------------------------------------ADC驱动文件-----------------------------------------------------
             ---------------------//
   3          //作者:JERRY----------------------------------------------------------------------------------------------
             ---------------------//
   4          //时间:2014年7月31日--------------------------------------------------------------------------------------
             ---------------------//
   5          //说明:使用时请根据实际需要更改“控制命令”内的内容-------------------------------------------------------
             -----------------------//
   6          //版本修改情况：------------------------------------------------------------------------------------------
             ---------------------//
   7          //-------2014.7.31------------写基础驱动函数--------------------------------------------------------------
             ---------------------//
   8          //-------2015.8.05------------初始化函数将端口配置为高阻模式----------------------------------------------
             ---------------------//
   9          //########################################################################################################
             -####################//
  10          #include"ADC.h"
  11          //=====================================================================================start==============
             -======================================================================================//
  12          //1/-------------ADC上电延时函数---------------------------//
  13          //入口：unsigned char n，n为需要延时的时间
  14          //出口：无
  15          //---------------------------------------------------------//
  16          void ADC_Delay(unsigned char n)
  17          {
  18   1          unsigned char x;
  19   1      
  20   1          while (n--)
  21   1          {
  22   2              x = 5000;
  23   2              while (x--);
  24   2          }
  25   1      }
  26          //3/-------------ADC启动函数-------------------------------//
  27          //入口：无
  28          //出口：无
  29          //---------------------------------------------------------//
  30          void ADC_start()
  31          {
  32   1        ADC_CONTR |=ADC_START;  //启动ADC
  33   1      }
  34          //4/-------------ADC转换完成标志位清除函数-----------------//
  35          //入口：无
  36          //出口：无
  37          //---------------------------------------------------------//
  38          void ADC_flagclean()
  39          {
  40   1        ADC_CONTR&=0Xef;  //清除标志位
  41   1      }
  42          //5/-------------ADC转换完成结果清除函数-------------------//
  43          //入口：无
  44          //出口：无
  45          //---------------------------------------------------------//
C51 COMPILER V9.52.0.0   ADC                                                               07/21/2018 19:14:19 PAGE 2   

  46          void ADC_valueclean()
  47          {
  48   1        ADC_RES = 0; 
  49   1        ADC_RESL = 0;
  50   1      }
  51          //6/----------------读取ADC转换结果函数--------------------//
  52          //入口：无
  53          //出口：unsigned long int类型，为ADC转换结果
  54          //---------------------------------------------------------//
  55          unsigned long int ADC_value()
  56          {
  57   1        unsigned long int result=0;
  58   1        if(!VAGUE && ADRJ)        //0 1
  59   1          result=ADC_RES*256+ADC_RESL;    //高2位低8位
  60   1        else if(!VAGUE && !ADRJ)    //0 0
  61   1          result=ADC_RES*4+ADC_RESL;      //高8位低2位
  62   1        else if(VAGUE && !ADRJ)     //1 0
  63   1          result=ADC_RES;
  64   1        return result;
  65   1      }
  66          //7/----------------更改通道口-----------------------------//
  67          //入口：unsigned char ch，ch为需要使用的通道口
  68          //出口：无
  69          //---------------------------------------------------------//
  70          void change_ch(unsigned char ch)
  71          {
  72   1        ADC_CONTR =  ADC_CONTR & 0xf8;
  73   1        ADC_CONTR |= ch;
  74   1      }
  75          //8/----------------根据AD值转化为电压---------------------//
  76          //入口：unsigned long int x，x为AD值
  77          //出口：无
  78          //---------------------------------------------------------//
  79          unsigned long int trans_ad(unsigned long int x)
  80          {
  81   1        unsigned long int result=0;
  82   1        if(x>=1)
  83   1          result=0.0000008*x*x*x*x-0.0003*x*x*x+0.0328*x*x+16.407*x+14.402;
  84   1        return result;  
  85   1      }
  86          //=====================================================================================end================
             -====================================================================================//
*** WARNING C294 IN LINE 59 OF ADC.c: unreachable code
*** WARNING C294 IN LINE 63 OF ADC.c: unreachable code


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    541    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       8
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
