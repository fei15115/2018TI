C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE FFT
OBJECT MODULE PLACED IN FFT.obj
COMPILER INVOKED BY: F:\keil\C51\BIN\C51.EXE 应用\FFT.C LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\应用) DEBUG OBJECTEXTEND
                    - PRINT(.\FFT.lst) TABS(2) OBJECT(FFT.obj)

line level    source

   1          //-----------------------------------------------
   2          // 版权归    SivaYao   所有
   3          // 第一次编程时间:2018年07月20日
   4          //-----------------------------------------------
   5          // 文件名：  FFT.C
   6          // 编写人：  SivaYao 
   7          // 编写时间：2018/07/20
   8          // 目标器件: STC8A8K
   9          // 编译工具: Keil uV3
  10          //-----------------------------------------------
  11          // 程序说明:
  12          // 2018年A题:电流信号检测装置(FFT快速傅里叶变换)
  13          // (1):定点,(2):1024点计算
  14          //-----------------------------------------------
  15          #include "FFT.H"
  16           int xdata Fft_Real [1024];   // FFT的实部
  17           int xdata Fft_Image[1024];   // FFT的虚部
  18          code int SIN_TAB[1024]={    //16位sin整数表1024点  64*16
  19              0,  201,  402,  603,  804, 1005, 1206, 1407, 1607, 1808, 2009, 2210, 2410, 2611, 2811, 3011,
  20           3211, 3411, 3611, 3811, 4011, 4210, 4409, 4609, 4808, 5006, 5205, 5403, 5602, 5800, 5997, 6195,
  21           6392, 6589, 6786, 6983, 7179, 7375, 7571, 7766, 7961, 8156, 8351, 8545, 8739, 8933, 9126, 9319,
  22           9512, 9704, 9896,10087,10278,10469,10659,10849,11039,11228,11416,11605,11793,11980,12167,12353,
  23          12539,12725,12910,13094,13278,13462,13645,13828,14010,14191,14372,14552,14732,14912,15090,15269,
  24          15446,15623,15800,15976,16151,16325,16499,16673,16846,17018,17189,17360,17530,17700,17869,18037,
  25          18204,18371,18537,18703,18868,19032,19195,19358,19519,19681,19841,20001,20159,20318,20475,20631,
  26          20787,20942,21097,21250,21403,21555,21706,21856,22005,22154,22301,22448,22594,22740,22884,23027,
  27          23170,23312,23453,23593,23732,23870,24007,24144,24279,24414,24547,24680,24812,24943,25073,25201,
  28          25330,25457,25583,25708,25832,25955,26077,26199,26319,26438,26557,26674,26790,26905,27020,27133,
  29          27245,27356,27466,27576,27684,27791,27897,28002,28106,28208,28310,28411,28511,28609,28707,28803,
  30          28898,28993,29086,29178,29269,29359,29447,29535,29621,29707,29791,29874,29956,30037,30117,30196,
  31          30273,30350,30425,30499,30572,30644,30714,30784,30852,30919,30985,31050,31114,31176,31237,31298,
  32          31357,31414,31471,31526,31581,31634,31685,31736,31785,31834,31881,31927,31971,32015,32057,32098,
  33          32138,32176,32214,32250,32285,32319,32351,32383,32413,32442,32469,32496,32521,32545,32568,32589,
  34          32610,32629,32647,32663,32679,32693,32706,32718,32728,32737,32745,32752,32758,32762,32765,32767,
  35          32767,32767,32765,32762,32758,32752,32745,32737,32728,32718,32706,32693,32679,32663,32647,32629,
  36          32610,32589,32568,32545,32521,32496,32469,32442,32413,32383,32351,32319,32285,32250,32214,32176,
  37          32138,32098,32057,32015,31971,31927,31881,31834,31785,31736,31685,31634,31581,31526,31471,31414,
  38          31357,31298,31237,31176,31114,31050,30985,30919,30852,30784,30714,30644,30572,30499,30425,30350,
  39          30273,30196,30117,30037,29956,29874,29791,29707,29621,29535,29447,29359,29269,29178,29086,28993,
  40          28898,28803,28707,28609,28511,28411,28310,28208,28106,28002,27897,27791,27684,27576,27466,27356,
  41          27245,27133,27020,26905,26790,26674,26557,26438,26319,26199,26077,25955,25832,25708,25583,25457,
  42          25330,25201,25073,24943,24812,24680,24547,24414,24279,24144,24007,23870,23732,23593,23453,23312,
  43          23170,23027,22884,22740,22594,22448,22301,22154,22005,21856,21706,21555,21403,21250,21097,20942,
  44          20787,20631,20475,20318,20159,20001,19841,19681,19519,19358,19195,19032,18868,18703,18537,18371,
  45          18204,18037,17869,17700,17530,17360,17189,17018,16846,16673,16499,16325,16151,15976,15800,15623,
  46          15446,15269,15090,14912,14732,14552,14372,14191,14010,13828,13645,13462,13278,13094,12910,12725,
  47           12539, 12353, 12167, 11980, 11793, 11605, 11416, 11228, 11039, 10849, 10659, 10469, 10278, 10087,  9896, 
             - 9704,
  48            9512,  9319,  9126,  8933,  8739,  8545,  8351,  8156,  7961,  7766,  7571,  7375,  7179,  6983,  6786, 
             - 6589,
  49            6392,  6195,  5997,  5800,  5602,  5403,  5205,  5006,  4808,  4609,  4409,  4210,  4011,  3811,  3611, 
             - 3411,
  50            3211,  3011,  2811,  2611,  2410,  2210,  2009,  1808,  1607,  1407,  1206,  1005,   804,   603,   402, 
             -  201,
C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 2   

  51               0,  -201,  -402,  -603,  -804, -1005, -1206, -1407, -1607, -1808, -2009, -2210, -2410, -2611, -2811, 
             --3011,
  52           -3211, -3411, -3611, -3811, -4011, -4210, -4409, -4609, -4808, -5006, -5205, -5403, -5602, -5800, -5997, 
             --6195,
  53           -6392, -6589, -6786, -6983, -7179, -7375, -7571, -7766, -7961, -8156, -8351, -8545, -8739, -8933, -9126, 
             --9319,
  54           -9512, -9704, -9896,-10087,-10278,-10469,-10659,-10849,-11039,-11228,-11416,-11605,-11793,-11980,-12167,-
             -12353,
  55          -12539,-12725,-12910,-13094,-13278,-13462,-13645,-13828,-14010,-14191,-14372,-14552,-14732,-14912,-15090,-
             -15269,
  56          -15446,-15623,-15800,-15976,-16151,-16325,-16499,-16673,-16846,-17018,-17189,-17360,-17530,-17700,-17869,-
             -18037,
  57          -18204,-18371,-18537,-18703,-18868,-19032,-19195,-19358,-19519,-19681,-19841,-20001,-20159,-20318,-20475,-
             -20631,
  58          -20787,-20942,-21097,-21250,-21403,-21555,-21706,-21856,-22005,-22154,-22301,-22448,-22594,-22740,-22884,-
             -23027,
  59          -23170,-23312,-23453,-23593,-23732,-23870,-24007,-24144,-24279,-24414,-24547,-24680,-24812,-24943,-25073,-
             -25201,
  60          -25330,-25457,-25583,-25708,-25832,-25955,-26077,-26199,-26319,-26438,-26557,-26674,-26790,-26905,-27020,-
             -27133,
  61          -27245,-27356,-27466,-27576,-27684,-27791,-27897,-28002,-28106,-28208,-28310,-28411,-28511,-28609,-28707,-
             -28803,
  62          -28898,-28993,-29086,-29178,-29269,-29359,-29447,-29535,-29621,-29707,-29791,-29874,-29956,-30037,-30117,-
             -30196,
  63          -30273,-30350,-30425,-30499,-30572,-30644,-30714,-30784,-30852,-30919,-30985,-31050,-31114,-31176,-31237,-
             -31298,
  64          -31357,-31414,-31471,-31526,-31581,-31634,-31685,-31736,-31785,-31834,-31881,-31927,-31971,-32015,-32057,-
             -32098,
  65          -32138,-32176,-32214,-32250,-32285,-32319,-32351,-32383,-32413,-32442,-32469,-32496,-32521,-32545,-32568,-
             -32589,
  66          -32610,-32629,-32647,-32663,-32679,-32693,-32706,-32718,-32728,-32737,-32745,-32752,-32758,-32762,-32765,-
             -32767,
  67          -32767,-32767,-32765,-32762,-32758,-32752,-32745,-32737,-32728,-32718,-32706,-32693,-32679,-32663,-32647,-
             -32629,
  68          -32610,-32589,-32568,-32545,-32521,-32496,-32469,-32442,-32413,-32383,-32351,-32319,-32285,-32250,-32214,-
             -32176,
  69          -32138,-32098,-32057,-32015,-31971,-31927,-31881,-31834,-31785,-31736,-31685,-31634,-31581,-31526,-31471,-
             -31414,
  70          -31357,-31298,-31237,-31176,-31114,-31050,-30985,-30919,-30852,-30784,-30714,-30644,-30572,-30499,-30425,-
             -30350,
  71          -30273,-30196,-30117,-30037,-29956,-29874,-29791,-29707,-29621,-29535,-29447,-29359,-29269,-29178,-29086,-
             -28993,
  72          -28898,-28803,-28707,-28609,-28511,-28411,-28310,-28208,-28106,-28002,-27897,-27791,-27684,-27576,-27466,-
             -27356,
  73          -27245,-27133,-27020,-26905,-26790,-26674,-26557,-26438,-26319,-26199,-26077,-25955,-25832,-25708,-25583,-
             -25457,
  74          -25330,-25201,-25073,-24943,-24812,-24680,-24547,-24414,-24279,-24144,-24007,-23870,-23732,-23593,-23453,-
             -23312,
  75          -23170,-23027,-22884,-22740,-22594,-22448,-22301,-22154,-22005,-21856,-21706,-21555,-21403,-21250,-21097,-
             -20942,
  76          -20787,-20631,-20475,-20318,-20159,-20001,-19841,-19681,-19519,-19358,-19195,-19032,-18868,-18703,-18537,-
             -18371,
  77          -18204,-18037,-17869,-17700,-17530,-17360,-17189,-17018,-16846,-16673,-16499,-16325,-16151,-15976,-15800,-
             -15623,
  78          -15446,-15269,-15090,-14912,-14732,-14552,-14372,-14191,-14010,-13828,-13645,-13462,-13278,-13094,-12910,-
             -12725,
  79          -12539,-12353,-12167,-11980,-11793,-11605,-11416,-11228,-11039,-10849,-10659,-10469,-10278,-10087, -9896, 
             --9704,
  80           -9512, -9319, -9126, -8933, -8739, -8545, -8351, -8156, -7961, -7766, -7571, -7375, -7179, -6983, -6786, 
             --6589,
  81           -6392, -6195, -5997, -5800, -5602, -5403, -5205, -5006, -4808, -4609, -4409, -4210, -4011, -3811, -3611, 
             --3411,
C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 3   

  82           -3211, -3011, -2811, -2611, -2410, -2210, -2009, -1808, -1607, -1407, -1206, -1005,  -804,  -603,  -402, 
             - -201,};
  83          code int COS_TAB[1024]={      //16位cos整数表1024点  64*16
  84          32767,32767,32765,32762,32758,32752,32745,32737,32728,32718,32706,32693,32679,32663,32647,32629,
  85          32610,32589,32568,32545,32521,32496,32469,32442,32413,32383,32351,32319,32285,32250,32214,32176,
  86          32138,32098,32057,32015,31971,31927,31881,31834,31785,31736,31685,31634,31581,31526,31471,31414,
  87          31357,31298,31237,31176,31114,31050,30985,30919,30852,30784,30714,30644,30572,30499,30425,30350,
  88          30273,30196,30117,30037,29956,29874,29791,29707,29621,29535,29447,29359,29269,29178,29086,28993,
  89          28898,28803,28707,28609,28511,28411,28310,28208,28106,28002,27897,27791,27684,27576,27466,27356,
  90          27245,27133,27020,26905,26790,26674,26557,26438,26319,26199,26077,25955,25832,25708,25583,25457,
  91          25330,25201,25073,24943,24812,24680,24547,24414,24279,24144,24007,23870,23732,23593,23453,23312,
  92          23170,23027,22884,22740,22594,22448,22301,22154,22005,21856,21706,21555,21403,21250,21097,20942,
  93          20787,20631,20475,20318,20159,20001,19841,19681,19519,19358,19195,19032,18868,18703,18537,18371,
  94          18204,18037,17869,17700,17530,17360,17189,17018,16846,16673,16499,16325,16151,15976,15800,15623,
  95          15446,15269,15090,14912,14732,14552,14372,14191,14010,13828,13645,13462,13278,13094,12910,12725,
  96          12539,12353,12167,11980,11793,11605,11416,11228,11039,10849,10659,10469,10278,10087, 9896, 9704,
  97           9512, 9319, 9126, 8933, 8739, 8545, 8351, 8156, 7961, 7766, 7571, 7375, 7179, 6983, 6786, 6589,
  98           6392, 6195, 5997, 5800, 5602, 5403, 5205, 5006, 4808, 4609, 4409, 4210, 4011, 3811, 3611, 3411,
  99           3211, 3011, 2811, 2611, 2410, 2210, 2009, 1808, 1607, 1407, 1206, 1005,  804,  603,  402,  201,
 100               0,  -201,  -402,  -603,  -804, -1005, -1206, -1407, -1607, -1808, -2009, -2210, -2410, -2611, -2811, 
             --3011,
 101           -3211, -3411, -3611, -3811, -4011, -4210, -4409, -4609, -4808, -5006, -5205, -5403, -5602, -5800, -5997, 
             --6195,
 102           -6392, -6589, -6786, -6983, -7179, -7375, -7571, -7766, -7961, -8156, -8351, -8545, -8739, -8933, -9126, 
             --9319,
 103           -9512, -9704, -9896,-10087,-10278,-10469,-10659,-10849,-11039,-11228,-11416,-11605,-11793,-11980,-12167,-
             -12353,
 104          -12539,-12725,-12910,-13094,-13278,-13462,-13645,-13828,-14010,-14191,-14372,-14552,-14732,-14912,-15090,-
             -15269,
 105          -15446,-15623,-15800,-15976,-16151,-16325,-16499,-16673,-16846,-17018,-17189,-17360,-17530,-17700,-17869,-
             -18037,
 106          -18204,-18371,-18537,-18703,-18868,-19032,-19195,-19358,-19519,-19681,-19841,-20001,-20159,-20318,-20475,-
             -20631,
 107          -20787,-20942,-21097,-21250,-21403,-21555,-21706,-21856,-22005,-22154,-22301,-22448,-22594,-22740,-22884,-
             -23027,
 108          -23170,-23312,-23453,-23593,-23732,-23870,-24007,-24144,-24279,-24414,-24547,-24680,-24812,-24943,-25073,-
             -25201,
 109          -25330,-25457,-25583,-25708,-25832,-25955,-26077,-26199,-26319,-26438,-26557,-26674,-26790,-26905,-27020,-
             -27133,
 110          -27245,-27356,-27466,-27576,-27684,-27791,-27897,-28002,-28106,-28208,-28310,-28411,-28511,-28609,-28707,-
             -28803,
 111          -28898,-28993,-29086,-29178,-29269,-29359,-29447,-29535,-29621,-29707,-29791,-29874,-29956,-30037,-30117,-
             -30196,
 112          -30273,-30350,-30425,-30499,-30572,-30644,-30714,-30784,-30852,-30919,-30985,-31050,-31114,-31176,-31237,-
             -31298,
 113          -31357,-31414,-31471,-31526,-31581,-31634,-31685,-31736,-31785,-31834,-31881,-31927,-31971,-32015,-32057,-
             -32098,
 114          -32138,-32176,-32214,-32250,-32285,-32319,-32351,-32383,-32413,-32442,-32469,-32496,-32521,-32545,-32568,-
             -32589,
 115          -32610,-32629,-32647,-32663,-32679,-32693,-32706,-32718,-32728,-32737,-32745,-32752,-32758,-32762,-32765,-
             -32767,
 116          -32767,-32767,-32765,-32762,-32758,-32752,-32745,-32737,-32728,-32718,-32706,-32693,-32679,-32663,-32647,-
             -32629,
 117          -32610,-32589,-32568,-32545,-32521,-32496,-32469,-32442,-32413,-32383,-32351,-32319,-32285,-32250,-32214,-
             -32176,
 118          -32138,-32098,-32057,-32015,-31971,-31927,-31881,-31834,-31785,-31736,-31685,-31634,-31581,-31526,-31471,-
             -31414,
 119          -31357,-31298,-31237,-31176,-31114,-31050,-30985,-30919,-30852,-30784,-30714,-30644,-30572,-30499,-30425,-
             -30350,
 120          -30273,-30196,-30117,-30037,-29956,-29874,-29791,-29707,-29621,-29535,-29447,-29359,-29269,-29178,-29086,-
             -28993,
 121          -28898,-28803,-28707,-28609,-28511,-28411,-28310,-28208,-28106,-28002,-27897,-27791,-27684,-27576,-27466,-
C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 4   

             -27356,
 122          -27245,-27133,-27020,-26905,-26790,-26674,-26557,-26438,-26319,-26199,-26077,-25955,-25832,-25708,-25583,-
             -25457,
 123          -25330,-25201,-25073,-24943,-24812,-24680,-24547,-24414,-24279,-24144,-24007,-23870,-23732,-23593,-23453,-
             -23312,
 124          -23170,-23027,-22884,-22740,-22594,-22448,-22301,-22154,-22005,-21856,-21706,-21555,-21403,-21250,-21097,-
             -20942,
 125          -20787,-20631,-20475,-20318,-20159,-20001,-19841,-19681,-19519,-19358,-19195,-19032,-18868,-18703,-18537,-
             -18371,
 126          -18204,-18037,-17869,-17700,-17530,-17360,-17189,-17018,-16846,-16673,-16499,-16325,-16151,-15976,-15800,-
             -15623,
 127          -15446,-15269,-15090,-14912,-14732,-14552,-14372,-14191,-14010,-13828,-13645,-13462,-13278,-13094,-12910,-
             -12725,
 128          -12539,-12353,-12167,-11980,-11793,-11605,-11416,-11228,-11039,-10849,-10659,-10469,-10278,-10087, -9896, 
             --9704,
 129           -9512, -9319, -9126, -8933, -8739, -8545, -8351, -8156, -7961, -7766, -7571, -7375, -7179, -6983, -6786, 
             --6589,
 130           -6392, -6195, -5997, -5800, -5602, -5403, -5205, -5006, -4808, -4609, -4409, -4210, -4011, -3811, -3611, 
             --3411,
 131           -3211, -3011, -2811, -2611, -2410, -2210, -2009, -1808, -1607, -1407, -1206, -1005,  -804,  -603,  -402, 
             - -201,
 132              0,  201,  402,  603,  804, 1005, 1206, 1407, 1607, 1808, 2009, 2210, 2410, 2611, 2811, 3011,
 133           3211, 3411, 3611, 3811, 4011, 4210, 4409, 4609, 4808, 5006, 5205, 5403, 5602, 5800, 5997, 6195,
 134           6392, 6589, 6786, 6983, 7179, 7375, 7571, 7766, 7961, 8156, 8351, 8545, 8739, 8933, 9126, 9319,
 135           9512, 9704, 9896,10087,10278,10469,10659,10849,11039,11228,11416,11605,11793,11980,12167,12353,
 136          12539,12725,12910,13094,13278,13462,13645,13828,14010,14191,14372,14552,14732,14912,15090,15269,
 137          15446,15623,15800,15976,16151,16325,16499,16673,16846,17018,17189,17360,17530,17700,17869,18037,
 138          18204,18371,18537,18703,18868,19032,19195,19358,19519,19681,19841,20001,20159,20318,20475,20631,
 139          20787,20942,21097,21250,21403,21555,21706,21856,22005,22154,22301,22448,22594,22740,22884,23027,
 140          23170,23312,23453,23593,23732,23870,24007,24144,24279,24414,24547,24680,24812,24943,25073,25201,
 141          25330,25457,25583,25708,25832,25955,26077,26199,26319,26438,26557,26674,26790,26905,27020,27133,
 142          27245,27356,27466,27576,27684,27791,27897,28002,28106,28208,28310,28411,28511,28609,28707,28803,
 143          28898,28993,29086,29178,29269,29359,29447,29535,29621,29707,29791,29874,29956,30037,30117,30196,
 144          30273,30350,30425,30499,30572,30644,30714,30784,30852,30919,30985,31050,31114,31176,31237,31298,
 145          31357,31414,31471,31526,31581,31634,31685,31736,31785,31834,31881,31927,31971,32015,32057,32098,
 146          32138,32176,32214,32250,32285,32319,32351,32383,32413,32442,32469,32496,32521,32545,32568,32589,
 147          32610,32629,32647,32663,32679,32693,32706,32718,32728,32737,32745,32752,32758,32762,32765,32767,};
 148          
 149          code unsigned int LIST_TAB[1024] = {      //采样存储序列表 低128 该表*2，高128，该表*2+1
 150          0,  512,  256,  768,  128,  640,  384,  896,   64,  576,  320,  832,  192,  704,  448,  960,
 151          32, 544,  288,  800,  160,  672,  416,  928,   96,  608,  352,  864,  224,  736,  480,  992,
 152          16, 528,  272,  784,  144,  656,  400,  912,   80,  592,  336,  848,  208,  720,  464,  976,
 153          48, 560,  304,  816,  176,  688,  432,  944,  112,  624,  368,  880,  240,  752,  496, 1008,
 154          8,  520,  264,  776,  136,  648,  392,  904,   72,  584,  328,  840,  200,  712,  456,  968,
 155          40, 552,  296,  808,  168,  680,  424,  936,  104,  616,  360,  872,  232,  744,  488, 1000,
 156          24, 536,  280,  792,  152,  664,  408,  920,   88,  600,  344,  856,  216,  728,  472,  984,
 157          56, 568,  312,  824,  184,  696,  440,  952,  120,  632,  376,  888,  248,  760,  504, 1016,
 158          4,  516,  260,  772,  132,  644,  388,  900,   68,  580,  324,  836,  196,  708,  452,  964,
 159          36, 548,  292,  804,  164,  676,  420,  932,  100,  612,  356,  868,  228,  740,  484,  996,
 160          20, 532,  276,  788,  148,  660,  404,  916,   84,  596,  340,  852,  212,  724,  468,  980,
 161          52, 564,  308,  820,  180,  692,  436,  948,  116,  628,  372,  884,  244,  756,  500, 1012,
 162          12, 524,  268,  780,  140,  652,  396,  908,   76,  588,  332,  844,  204,  716,  460,  972,
 163          44, 556,  300,  812,  172,  684,  428,  940,  108,  620,  364,  876,  236,  748,  492, 1004,
 164          28, 540,  284,  796,  156,  668,  412,  924,   92,  604,  348,  860,  220,  732,  476,  988,
 165          60, 572,  316,  828,  188,  700,  444,  956,  124,  636,  380,  892,  252,  764,  508, 1020,
 166          2,  514,  258,  770,  130,  642,  386,  898,   66,  578,  322,  834,  194,  706,  450,  962,
 167          34, 546,  290,  802,  162,  674,  418,  930,   98,  610,  354,  866,  226,  738,  482,  994,
 168          18, 530,  274,  786,  146,  658,  402,  914,   82,  594,  338,  850,  210,  722,  466,  978,
 169          50, 562,  306,  818,  178,  690,  434,  946,  114,  626,  370,  882,  242,  754,  498, 1010,
 170          10, 522,  266,  778,  138,  650,  394,  906,   74,  586,  330,  842,  202,  714,  458,  970,
 171          42, 554,  298,  810,  170,  682,  426,  938,  106,  618,  362,  874,  234,  746,  490, 1002,
 172          26, 538,  282,  794,  154,  666,  410,  922,   90,  602,  346,  858,  218,  730,  474,  986,
C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 5   

 173          58, 570,  314,  826,  186,  698,  442,  954,  122,  634,  378,  890,  250,  762,  506, 1018,
 174          6,  518,  262,  774,  134,  646,  390,  902,   70,  582,  326,  838,  198,  710,  454,  966,
 175          38, 550,  294,  806,  166,  678,  422,  934,  102,  614,  358,  870,  230,  742,  486,  998,
 176          22, 534,  278,  790,  150,  662,  406,  918,   86,  598,  342,  854,  214,  726,  470,  982,
 177          54, 566,  310,  822,  182,  694,  438,  950,  118,  630,  374,  886,  246,  758,  502, 1014,
 178          14, 526,  270,  782,  142,  654,  398,  910,   78,  590,  334,  846,  206,  718,  462,  974,
 179          46, 558,  302,  814,  174,  686,  430,  942,  110,  622,  366,  878,  238,  750,  494, 1006,
 180          30, 542,  286,  798,  158,  670,  414,  926,   94,  606,  350,  862,  222,  734,  478,  990,
 181          62, 574,  318,  830,  190,  702,  446,  958,  126,  638,  382,  894,  254,  766,  510, 1022,
 182          1,  513,  257,  769,  129,  641,  385,  897,   65,  577,  321,  833,  193,  705,  449,  961,
 183          33, 545,  289,  801,  161,  673,  417,  929,   97,  609,  353,  865,  225,  737,  481,  993,
 184          17, 529,  273,  785,  145,  657,  401,  913,   81,  593,  337,  849,  209,  721,  465,  977,
 185          49, 561,  305,  817,  177,  689,  433,  945,  113,  625,  369,  881,  241,  753,  497, 1009,
 186          9,  521,  265,  777,  137,  649,  393,  905,   73,  585,  329,  841,  201,  713,  457,  969,
 187          41, 553,  297,  809,  169,  681,  425,  937,  105,  617,  361,  873,  233,  745,  489, 1001,
 188          25, 537,  281,  793,  153,  665,  409,  921,   89,  601,  345,  857,  217,  729,  473,  985,
 189          57, 569,  313,  825,  185,  697,  441,  953,  121,  633,  377,  889,  249,  761,  505, 1017,
 190          5,  517,  261,  773,  133,  645,  389,  901,   69,  581,  325,  837,  197,  709,  453,  965,
 191          37, 549,  293,  805,  165,  677,  421,  933,  101,  613,  357,  869,  229,  741,  485,  997,
 192          21, 533,  277,  789,  149,  661,  405,  917,   85,  597,  341,  853,  213,  725,  469,  981,
 193          53, 565,  309,  821,  181,  693,  437,  949,  117,  629,  373,  885,  245,  757,  501, 1013,
 194          13, 525,  269,  781,  141,  653,  397,  909,   77,  589,  333,  845,  205,  717,  461,  973,
 195          45, 557,  301,  813,  173,  685,  429,  941,  109,  621,  365,  877,  237,  749,  493, 1005,
 196          29, 541,  285,  797,  157,  669,  413,  925,   93,  605,  349,  861,  221,  733,  477,  989,
 197          61, 573,  317,  829,  189,  701,  445,  957,  125,  637,  381,  893,  253,  765,  509, 1021,
 198          3,  515,  259,  771,  131,  643,  387,  899,   67,  579,  323,  835,  195,  707,  451,  963,
 199          35, 547,  291,  803,  163,  675,  419,  931,   99,  611,  355,  867,  227,  739,  483,  995,
 200          19, 531,  275,  787,  147,  659,  403,  915,   83,  595,  339,  851,  211,  723,  467,  979,
 201          51, 563,  307,  819,  179,  691,  435,  947,  115,  627,  371,  883,  243,  755,  499, 1011,
 202          11, 523,  267,  779,  139,  651,  395,  907,   75,  587,  331,  843,  203,  715,  459,  971,
 203          43, 555,  299,  811,  171,  683,  427,  939,  107,  619,  363,  875,  235,  747,  491, 1003,
 204          27, 539,  283,  795,  155,  667,  411,  923,   91,  603,  347,  859,  219,  731,  475,  987,
 205          59, 571,  315,  827,  187,  699,  443,  955,  123,  635,  379,  891,  251,  763,  507, 1019,
 206          7,  519,  263,  775,  135,  647,  391,  903,   71,  583,  327,  839,  199,  711,  455,  967,
 207          39, 551,  295,  807,  167,  679,  423,  935,  103,  615,  359,  871,  231,  743,  487,  999,
 208          23, 535,  279,  791,  151,  663,  407,  919,   87,  599,  343,  855,  215,  727,  471,  983,
 209          55, 567,  311,  823,  183,  695,  439,  951,  119,  631,  375,  887,  247,  759,  503, 1015,
 210          15, 527,  271,  783,  143,  655,  399,  911,   79,  591,  335,  847,  207,  719,  463,  975,
 211          47, 559,  303,  815,  175,  687,  431,  943,  111,  623,  367,  879,  239,  751,  495, 1007,
 212          31, 543,  287,  799,  159,  671,  415,  927,   95,  607,  351,  863,  223,  735,  479,  991,
 213          63, 575,  319,  831,  191,  703,  447,  959,  127,  639,  383,  895,  255,  767,  511, 1023,};
 214          
 215          void FFT( void )//1024点 基2快速傅里叶算法
 216          { 
 217   1        int i,b,k,j,p;      //中间变量    
 218   1        long int Temp_Real,Temp_Imag,temp ;          
 219   1        for(i=1; i<=10; i++) {          /* for(1)第一重循环,循环变量i */    
 220   2          b=1;
 221   2          b <<=(i-1);                //b为蝶形计算的两算子之间的下标间隔
 222   2          for( j=0; j<=b-1; j++) {   /* for (2)第二重循环,循环变量j *///一次完整的蝶形计算的区块数              
             -                   
 223   3            p=1;                     //对于1024点FFT，每次蝶形计算共1024次,等于区块数*内部点数
 224   3            p <<= (10-i);           
 225   3            p = p*j;
 226   3            for( k=j; k<1024; k=k+2*b) { /* for (3)第二重循环,循环变量k*///每个区块里的计算次数       
 227   4              Temp_Real =Fft_Real[k];
 228   4              Temp_Imag =Fft_Image[k];
 229   4              temp      =Fft_Real[k+b];
 230   4              Fft_Real [k]  =Fft_Real[k] +(((long int)Fft_Real[k+b]*COS_TAB[p])>>15)+(((long int)Fft_Image[k+b]*
             -SIN_TAB[p])>>15);
 231   4              Fft_Image[k]  =Fft_Image[k]-(((long int)Fft_Real[k+b]*SIN_TAB[p])>>15)+(((long int)Fft_Image[k+b]*
             -COS_TAB[p])>>15);
C51 COMPILER V9.54   FFT                                                                   04/07/2021 23:27:20 PAGE 6   

 232   4              Fft_Real [k+b]=Temp_Real   -(((long int)Fft_Real[k+b]*COS_TAB[p])>>15)-(((long int)Fft_Image[k+b]*
             -SIN_TAB[p])>>15);
 233   4              Fft_Image[k+b]=Temp_Imag   +(((long int)temp         *SIN_TAB[p])>>15)-(((long int)Fft_Image[k+b]*
             -COS_TAB[p])>>15); // 移位.防止溢出.              
 234   4              Fft_Real[k]   >>= 1;  Fft_Image[k]  >>= 1;  Fft_Real[k+b] >>= 1;  Fft_Image[k+b]>>= 1; }          
             -                //各项都除以2                           
 235   3            }   
 236   2          }     
 237   1        }
 238            


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1514    ----
   CONSTANT SIZE    =   6144    ----
   XDATA SIZE       =   4096      22
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
