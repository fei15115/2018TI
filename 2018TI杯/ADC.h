//############################################################################################################################//
//----------------------------------------ADC头文件---------------------------------------------------------------------------//
//作者:JERRY------------------------------------------------------------------------------------------------------------------//
//时间:2014年7月31日----------------------------------------------------------------------------------------------------------//
//说明:使用时请根据实际需要更改“控制命令”内的内容-----------------------------------------------------------------------------//
//版本修改情况：--------------------------------------------------------------------------------------------------------------//
//-------2014.7.31------------写基础驱动函数声明，指令宏定义------------------------------------------------------------------//
//-------2015.8.05------------更改头文件使其支持15w4k单片机-------------------------------------------------------------------//
//############################################################################################################################//
#ifndef __ADC_H_
#define __ADC_H_
//=====================================================================================start====================================================================================================//
//--------------------------------------------------------------------------头文件-------------------------------------------------------------------------------------------//
#include"stc15w4k.h"
//--------------------------------------------------------------------------宏定义-------------------------------------------------------------------------------------------//
#define ADC_POWER   0x80            //ADC电源控制位
#define ADC_FLAG    0x10            //ADC完成标志
#define ADC_START   0x08            //ADC起始控制位
#define ADC_SPEEDLL 0x00            //540个时钟
#define ADC_SPEEDL  0x20            //360个时钟
#define ADC_SPEEDH  0x40            //180个时钟
#define ADC_SPEEDHH 0x60            //90个时钟
//-------------------------------------------------------------------------控制命令------------------------------------------------------------------------------------------//
#define ADRJ 0					//结果控制位，1为高2位低8位，0为低2位高8位
#define VAGUE 0					//精确度控制位，0为精确度为10位，1为精确度为8位		//***禁止ADRJ=1,VAGUE=1***
#define SPEED ADC_SPEEDHH		//速率控制位，根据宏定义选择适当的速率
//-------------------------------------------------------------------------函数声明-------------------------------------------------------------------------------------------//
//一/基础函数
void ADC_Delay(unsigned char n);	//ADC上电延时函数
//二/通用函数
void ADC_start();					//ADC启动函数
void ADC_flagclean();				//ADC转换完成标志位清除函数
void ADC_valueclean();				//ADC转换完成结果清除函数
unsigned long int ADC_value();		//读取ADC转换结果函数
void change_ch(unsigned char ch);	//更改通道口函数
unsigned long int trans_ad(unsigned long int x);//根据AD得到电压
//========================================================================================end=====================================================================================================//
#endif